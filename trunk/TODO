Ethernet
- Map and configure CS8900A
  - CS2  (0x60000000?)
  - 7 wait states?
  - Pinsel EINT2 active high
  - Attach EINT2 to Ethernet::Interrupt()

- Pick up interrupt on link status, track in driver, log

Add ICMP

Add UDP

Optimize memset, memcpy
- If operands are 32 bit aligned, use 32-bit ops

Improve exeption handler - traceback all threads, print thread state
- Write tool to symbolize console crash output

Thread features
- Priority willing

Implement SPI driver

Implement SD card block driver

Implement FAT32

Run clock off Timer1

Implement Watchdog
- Use hw watchdog

Image sizes:
 -Os         				 84k
 -Os -DTRACE 				 85k
 -Os -DTRACE -DDEBUG		 95k
 -O0 -DTRACE -DDEBUG		189k
 -O1 -DTRACE -DDEBUG		135k
 -O2 -DTRACE -DDEBUG		130k
 -O3 -DTRACE -DDEBUG		139k

---

CS8900 notes:

I/O mode:
- Eight 16-bit addresses
- Default at power up

Powerup configuration:
- Set IObase in PacketPage+0x20 (default 0x300)
- 0x3000 in IObase+0xa as signature after reset; write nonzero value
  (4.10 page 75)
- Wait for init/calibration done (R16.INITD)
- I/O space mode
- Memory base addr
- Ethernet phys addr
- Frame types to receive
- Enable 16 tx collisions
- INTR0 on packet receive
  - Set PacketPage+022h to 0x0000
- Leave DMA disabled
- Select media interface (auto-select)
- See 3.3 page 18, 3.4 page 20
- Control regs: 4.4 page 46

Packet transmission:
- Phase 1:
  - Transmit Command: includes info on threshold at which to start transmit
    (5, 381, 1021, or all)
  - Transmit Length: indicates buffer space required
  - When buffer space is available, begin copy frame into CS8900
  - Host supplies Dest Addr, Src Addr, Length, LLC (data)
- Phase 2:
  - CS8900 provides preamble, start-of-frame, adds CRC32, any padding
  - Puts onto media
- See 5.7 page 98.

Packet reception:
- Phase 1:
  - Packet is clocked in and decoded, preamble/s-o-f are stripped
  - Address is passed through programmable addr filter
  - Notifies processor
- Phase 2:
  - Transfer frame into host memory
- See 5.2 page 78 through 5.6 page 95.

Promiscuous mode:
- Adjust address filter

Explicit device reset:
- Set reset bit (SelfCTL.6)

Interrupts:
- On TxEvent (reg8), RxEvent
- Enable interrupts in TxCFG, RxCFG
- Lose packets on transmitter errors (don't bother keeping around)
  Higher layers implement retransmit policy
